/*
 * generated by Xtext 2.20.0
 */
package sdu.mdsd.validation

import org.eclipse.xtext.validation.Check
import sdu.mdsd.ioT.Device
import sdu.mdsd.generator.IDKModelUtil
import javax.inject.Inject
import sdu.mdsd.ioT.IoTPackage
import sdu.mdsd.ioT.IoTDevice

/**
 * This class contains custom validation rules. 
 *
 * See https://www.eclipse.org/Xtext/documentation/303_runtime_concepts.html#validation
 */
class IoTValidator extends AbstractIoTValidator {
	
	protected static val ISSUE_CODE_PREFIX =    "sdu.mdsd.iot."
	public static val HIERARCHY_CYCLE =     ISSUE_CODE_PREFIX + "HierarchyCycle";
	
	@Inject extension IDKModelUtil
	
	@Check def checkClassHierarchy(IoTDevice d){
		if (d.classHierarchy.contains(d)){
			error("cycle in inheritance of device '" + d.name + "'",  IoTPackage.eINSTANCE.getDevice_Parent(),  HIERARCHY_CYCLE, d.parent.name)
		}
	}
	
}
